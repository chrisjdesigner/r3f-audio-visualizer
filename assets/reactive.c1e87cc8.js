import{r as g,M as R,u as _,j as y,B as v,a as B,b,H as E,C as d,c as F,f as G,F as N,V as L}from"./index.cb8bbf1f.js";import{G as O}from"./ground.3311bbd6.js";import{L as j}from"./Lut.e8a078a1.js";const z=({coordinateMapper:M,nPerSide:e=10,cubeSideLength:l=.5,cubeSpacingScalar:i=.1,volume:A=!0,colorLut:T="cooltowarm"})=>{const u=g.exports.useRef(null),m=g.exports.useMemo(()=>new R,[]),I=A?d.CARTESIAN_3D:d.CARTESIAN_CUBE_FACES;return g.exports.useEffect(()=>{const w=new j(T);let p,t,s,a,o;for(let r=0;r<e;r++)for(let n=0;n<e;n++)for(let c=0;c<e;c++)p=r*e**2+n*e+c,t=r/(e-1),s=n/(e-1),a=c/(e-1),t==0||t==1?o=Math.hypot(s-.5,a-.5)/E:s==0||s==1?o=Math.hypot(t-.5,a-.5)/E:a==0||a==1?o=Math.hypot(t-.5,s-.5)/E:o=0,u.current.setColorAt(p,w.getColor(o));u.current.instanceColor.needsUpdate=!0}),_(({clock:w})=>{const p=w.getElapsedTime(),t=e*(1+i)*l;let s,a,o,r,n,c,U,f;for(let C=0;C<e;C++)for(let h=0;h<e;h++)for(let x=0;x<e;x++)s=C*e**2+h*e+x,a=C/(e-1),o=h/(e-1),r=x/(e-1),n=t*(a-.5),c=t*(o-.5),U=t*(r-.5),m.setPosition(n,c,U),f=.1+.9*M.map(I,a,o,r,p),m.elements[0]=f,m.elements[5]=f,m.elements[10]=f,u.current.setMatrixAt(s,m);u.current.instanceMatrix.needsUpdate=!0}),y("instancedMesh",{ref:u,castShadow:!0,receiveShadow:!0,args:[new v,new B,e**3],children:[b("boxGeometry",{attach:"geometry",args:[l,l,l,1]}),b("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},H=({coordinateMapper:M})=>{const{nPerSide:e,cubeUnitSideLength:l,cubeUnitSpacingScalar:i,volume:A}=F({Cube:G({nPerSide:{value:10,min:3,max:50,step:1},cubeUnitSideLength:{value:.5,min:.1,max:2,step:.05},cubeUnitSpacingScalar:{value:.1,min:0,max:2,step:.1},volume:!0},{collapsed:!0})});return y(N,{children:[b(z,{coordinateMapper:M,nPerSide:e,cubeSideLength:l,cubeSpacingScalar:i,volume:A}),b(O,{position:new L(0,0,-.75*e*(1+i)*l)})]})};export{H as default};
