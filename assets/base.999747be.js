import{r as T,M as I,C as Y,u as g,d as j,j as w,B as z,a as H,b as d,c as R}from"./index.3ba03cfd.js";const C=({coordinateMapper:O,nGridRows:s=100,nGridCols:e=100,cubeSideLength:a=.025,cubeSpacingScalar:y=5,palette:A=R.THREE_COOL_TO_WARM,pinStyle:_=!1,color:B="white"})=>{const o=T.exports.useRef(null),l=T.exports.useMemo(()=>new I,[]),P=A?Y.getPalette(A).buildLut():null;return T.exports.useEffect(()=>{if(!P)return;const p=Math.hypot(.5,.5);let m,c,i,n;for(let r=0;r<s;r++)for(let t=0;t<e;t++)m=r*e+t,c=r/(s-1),i=t/(e-1),n=Math.hypot(c-.5,i-.5)/p,o.current.setColorAt(m,P.getColor(n));o.current.instanceColor.needsUpdate=!0}),g(({clock:p})=>{const m=p.getElapsedTime(),c=s*y*a,i=e*y*a,n=a+O.amplitude;let r,t,M,h,E,f;for(let u=0;u<s;u++)for(let x=0;x<e;x++)r=u*e+x,t=u/(s-1),M=x/(e-1),f=O.map(j.CARTESIAN_2D,t,M,0,m),h=c*(t-.5),E=i*(M-.5),_?(l.setPosition(h,E,(n+f)/2),l.elements[10]=(n+f)/a):l.setPosition(h,E,f),o.current.setMatrixAt(r,l);o.current.instanceMatrix.needsUpdate=!0}),w("instancedMesh",{ref:o,castShadow:!0,receiveShadow:!0,args:[new z,new H,s*e],children:[d("boxGeometry",{attach:"geometry",args:[a,a,a,1]}),d("meshPhongMaterial",{attach:"material",color:B,toneMapped:!1})]})};export{C as B};
