import{r as b,M as A,a as B,b as v,B as R,c as _,j as d,N as g,u as E,d as F,f as G,E as T,F as N,V as j}from"./index.6a4a3c5d.js";import{G as z}from"./ground.f25987c0.js";import{L as D}from"./Lut.4994c9e7.js";const O=({coordinateMapper:w,nPerSide:e=10,cubeSideLength:l=.5,cubeSpacingScalar:m=.1,colorLut:i="cooltowarm"})=>{const r=b.exports.useRef(null),t=b.exports.useMemo(()=>new A,[]);return b.exports.useEffect(()=>{const y=new D(i);let f,a,n,o,s;for(let c=0;c<e;c++)for(let u=0;u<e;u++)for(let p=0;p<e;p++)f=c*e**2+u*e+p,a=c/(e-1),n=u/(e-1),o=p/(e-1),a==0||a==1?s=Math.hypot(n-.5,o-.5)/g:n==0||n==1?s=Math.hypot(a-.5,o-.5)/g:o==0||o==1?s=Math.hypot(a-.5,n-.5)/g:s=0,r.current.setColorAt(f,y.getColor(s));r.current.instanceColor.needsUpdate=!0}),B(({clock:y})=>{const f=y.getElapsedTime(),a=e*(1+m)*l;let n,o,s,c,u,p,U,h;for(let x=0;x<e;x++)for(let C=0;C<e;C++)for(let M=0;M<e;M++)n=x*e**2+C*e+M,o=x/(e-1),s=C/(e-1),c=M/(e-1),u=a*(o-.5),p=a*(s-.5),U=a*(c-.5),t.setPosition(u,p,U),h=.1+.9*w.map(o,s,c,f),t.elements[0]=h,t.elements[5]=h,t.elements[10]=h,r.current.setMatrixAt(n,t);r.current.instanceMatrix.needsUpdate=!0}),v("instancedMesh",{ref:r,castShadow:!0,receiveShadow:!0,args:[new R,new _,e**3],children:[d("boxGeometry",{attach:"geometry",args:[l,l,l,1]}),d("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},L=({})=>{const w=E(t=>t.coordinateMapper),e=E(t=>t.updateCoordinateType),{nPerSide:l,cubeUnitSideLength:m,cubeUnitSpacingScalar:i,volume:r}=F({Cube:G({nPerSide:{value:10,min:3,max:50,step:1},cubeUnitSideLength:{value:.5,min:.1,max:2,step:.05},cubeUnitSpacingScalar:{value:.1,min:0,max:2,step:.1},volume:!0},{collapsed:!0})});return b.exports.useEffect(()=>{e(r?T.Cartesian_3D:T.Cartesian_CubeFaces)},[r]),v(N,{children:[d(O,{coordinateMapper:w,nPerSide:l,cubeSideLength:m,cubeSpacingScalar:i}),d(z,{position:new j(0,0,-.75*l*(1+i)*m)})]})};export{L as default};
