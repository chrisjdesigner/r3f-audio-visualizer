import{r as g,M as F,E as v,a as G,b as A,B as T,c as _,j as b,H as y,d as I,f as L,F as R,V as j}from"./index.21a0c321.js";import{G as z}from"./ground.689e2724.js";import{L as V}from"./Lut.aedd6cf9.js";const D=({coordinateMapper:M,nPerSide:e=10,cubeSideLength:n=.5,cubeSpacingScalar:i=.1,volume:w=!0,colorLut:B="cooltowarm"})=>{const u=g.exports.useRef(null),m=g.exports.useMemo(()=>new F,[]),E=w?v.Cartesian_3D:v.Cartesian_CubeFaces;return g.exports.useEffect(()=>{const d=new V(B);let p,t,o,a,s;for(let r=0;r<e;r++)for(let l=0;l<e;l++)for(let c=0;c<e;c++)p=r*e**2+l*e+c,t=r/(e-1),o=l/(e-1),a=c/(e-1),t==0||t==1?s=Math.hypot(o-.5,a-.5)/y:o==0||o==1?s=Math.hypot(t-.5,a-.5)/y:a==0||a==1?s=Math.hypot(t-.5,o-.5)/y:s=0,u.current.setColorAt(p,d.getColor(s));u.current.instanceColor.needsUpdate=!0}),G(({clock:d})=>{const p=d.getElapsedTime(),t=e*(1+i)*n;let o,a,s,r,l,c,U,f;for(let h=0;h<e;h++)for(let x=0;x<e;x++)for(let C=0;C<e;C++)o=h*e**2+x*e+C,a=h/(e-1),s=x/(e-1),r=C/(e-1),l=t*(a-.5),c=t*(s-.5),U=t*(r-.5),m.setPosition(l,c,U),f=.1+.9*M.map(E,a,s,r,p),m.elements[0]=f,m.elements[5]=f,m.elements[10]=f,u.current.setMatrixAt(o,m);u.current.instanceMatrix.needsUpdate=!0}),A("instancedMesh",{ref:u,castShadow:!0,receiveShadow:!0,args:[new T,new _,e**3],children:[b("boxGeometry",{attach:"geometry",args:[n,n,n,1]}),b("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},X=({coordinateMapper:M})=>{const{nPerSide:e,cubeUnitSideLength:n,cubeUnitSpacingScalar:i,volume:w}=I({Cube:L({nPerSide:{value:10,min:3,max:50,step:1},cubeUnitSideLength:{value:.5,min:.1,max:2,step:.05},cubeUnitSpacingScalar:{value:.1,min:0,max:2,step:.1},volume:!0},{collapsed:!0})});return A(R,{children:[b(D,{coordinateMapper:M,nPerSide:e,cubeSideLength:n,cubeSpacingScalar:i,volume:w}),b(z,{position:new j(0,0,-.75*e*(1+i)*n)})]})};export{X as default};
