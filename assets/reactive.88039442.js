import{r as f,M as B,a as E,b as v,B as T,c as j,j as x,d as z,f as A,u as S,E as C,F,V as G}from"./index.e77f1834.js";import{G as V}from"./ground.4a3bf608.js";import{L as X}from"./Lut.8a91fdee.js";const Y=({coordinateMapper:M,nGridRows:t=100,nGridCols:e=100,cubeSideLength:r=.025,cubeSpacingScalar:p=5,colorLut:h="cooltowarm"})=>{const o=f.exports.useRef(null),s=f.exports.useMemo(()=>new B,[]);return f.exports.useEffect(()=>{const g=new X(h),y=Math.hypot(.5,.5);let m,d,c,i;for(let a=0;a<t;a++)for(let n=0;n<e;n++)m=a*e+n,d=a/(t-1),c=n/(e-1),i=Math.hypot(d-.5,c-.5)/y,o.current.setColorAt(m,g.getColor(i));o.current.instanceColor.needsUpdate=!0}),E(({clock:g})=>{const y=g.getElapsedTime(),m=t*p*r,d=e*p*r;let c,i,a,n,w,U;for(let l=0;l<t;l++)for(let u=0;u<e;u++)c=l*e+u,i=l/(t-1),a=u/(e-1),U=M.map(i,a,0,y),n=m*(i-.5),w=d*(a-.5),o.current.setMatrixAt(c,s.setPosition(n,w,U));o.current.instanceMatrix.needsUpdate=!0}),v("instancedMesh",{ref:o,castShadow:!0,receiveShadow:!0,args:[new T,new j,t*e],children:[x("boxGeometry",{attach:"geometry",args:[r,r,r,1]}),x("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},L=({})=>{const{nGridRows:M,nGridCols:t,gridUnitSideLength:e,gridUnitSpacingScalar:r}=z({Grid:A({nGridRows:{value:100,min:2,max:500,step:1},nGridCols:{value:100,min:2,max:500,step:1},gridUnitSideLength:{value:.025,min:.01,max:.5,step:.005},gridUnitSpacingScalar:{value:5,min:1,max:10,step:.5}},{collapsed:!0})}),p=S(s=>s.amplitude),h=S(s=>s.coordinateMapper),o=S(s=>s.updateCoordinateType);return f.exports.useEffect(()=>{o(C.Cartesian_2D)},[]),v(F,{children:[x(Y,{coordinateMapper:h,nGridRows:M,nGridCols:t,cubeSideLength:e,cubeSpacingScalar:r}),x(V,{position:new G(0,0,-2.5*p)})]})};export{L as default};
