import{u as y,f as B,r as M,M as R,a as v,b as A,B as E,c as L,j as g}from"./index.c6f5d8df.js";import{L as P}from"./Lut.4c9f9cbc.js";const b=Math.hypot(.5,.5),j=({getValueForNormalizedCoord:S})=>{const{nPerSide:e,cubeSideLength:l,cubeSpacingScalar:C}=y({Cube:B({nPerSide:{value:10,min:3,max:50,step:1},cubeSideLength:{value:.5,min:.1,max:2,step:.05},cubeSpacingScalar:{value:.1,min:0,max:2,step:.1}},{collapsed:!0})}),i=M.exports.useRef(null),u=M.exports.useMemo(()=>new R,[]);return M.exports.useEffect(()=>{const x=new P("cooltowarm");let m,t,r,a,s;for(let o=0;o<e;o++)for(let n=0;n<e;n++)for(let c=0;c<e;c++)m=o*e**2+n*e+c,t=o/(e-1),r=n/(e-1),a=c/(e-1),t==0||t==1?s=Math.hypot(r-.5,a-.5)/b:r==0||r==1?s=Math.hypot(t-.5,a-.5)/b:a==0||a==1?s=Math.hypot(t-.5,r-.5)/b:s=0,i.current.setColorAt(m,x.getColor(s));i.current.instanceColor.needsUpdate=!0},[e,l,C,S]),v(({clock:x})=>{const m=x.getElapsedTime(),t=e*(1+C)*l;let r,a,s,o,n,c,w,p;for(let f=0;f<e;f++)for(let h=0;h<e;h++)for(let d=0;d<e;d++)r=f*e**2+h*e+d,a=f/(e-1),s=h/(e-1),o=d/(e-1),n=t*(a-.5),c=t*(s-.5),w=t*(o-.5),u.setPosition(n,c,w),p=.1+.9*S(a,s,o,m),u.elements[0]=p,u.elements[5]=p,u.elements[10]=p,i.current.setMatrixAt(r,u);i.current.instanceMatrix.needsUpdate=!0}),A("instancedMesh",{ref:i,castShadow:!0,receiveShadow:!0,args:[new E,new L,e**3],children:[g("boxGeometry",{attach:"geometry",args:[l,l,l,1]}),g("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})};export{j as B};
