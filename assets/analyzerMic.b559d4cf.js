import{r as c,j as d}from"./index.3df260d0.js";import{A as f}from"./audioMotion-analyzer.59e8360d.js";const m=({freqDataRef:u})=>{const n=c.exports.useRef(null),e=c.exports.useRef(null),r=c.exports.useRef(null),a=()=>{r!=null&&r.current&&(e.current.disconnectInput(r.current),r.current=null)},s=()=>{a(),navigator.mediaDevices?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(t=>{n.current&&n.current.pause(),r.current=e.current.audioCtx.createMediaStreamSource(t),e.current.connectInput(r.current),e.current.volume=0}).catch(t=>{alert("Microphone access denied by user")}):alert("User mediaDevices not available")},i=t=>{(!u.current||u.current===void 0)&&(u.current=new Array(t.getBars().length));let o=0;for(const l of t.getBars())u.current[o]=l.value[0],o++};return c.exports.useEffect(()=>{!n.current||e.current||(e.current=new f(void 0,{source:n.current,mode:2,useCanvas:!1,onCanvasDraw:i}),e.current.volume=0,s())},[]),d("audio",{ref:n,crossOrigin:"anonymous"})};export{m as default};
